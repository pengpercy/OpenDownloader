<Application xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             x:Class="OpenDownloader.App"
             xmlns:local="using:OpenDownloader"
             xmlns:vm="using:OpenDownloader.ViewModels"
             x:DataType="vm:MainWindowViewModel"
             RequestedThemeVariant="Default">

    <Application.DataTemplates>
        <local:ViewLocator />
    </Application.DataTemplates>

    <Application.Styles>
        <FluentTheme />
        <StyleInclude Source="avares://Avalonia.Controls.DataGrid/Themes/Fluent.xaml" />

        <Style Selector="Window.dialog">
            <Setter Property="WindowStartupLocation" Value="CenterOwner" />
            <Setter Property="SystemDecorations" Value="BorderOnly" />
            <Setter Property="CanResize" Value="False" />
            <Setter Property="ExtendClientAreaToDecorationsHint" Value="True" />
            <Setter Property="ExtendClientAreaChromeHints" Value="NoChrome" />
            <Setter Property="ExtendClientAreaTitleBarHeightHint" Value="-1" />
            <Setter Property="TransparencyLevelHint" Value="AcrylicBlur" />
            <Setter Property="Background" Value="{DynamicResource SystemControlBackgroundChromeMediumLowBrush}" />
        </Style>

        <Style Selector="Border.dialogRoot">
            <Setter Property="CornerRadius" Value="12" />
            <Setter Property="Background" Value="{DynamicResource WorkspaceBackgroundBrush}" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="BorderBrush" Value="{DynamicResource SystemControlForegroundBaseLowBrush}" />
            <Setter Property="BoxShadow" Value="0 8 30 0 #3A000000" />
        </Style>

        <Style Selector="Button.dialogButton">
            <Setter Property="Height" Value="32" />
            <Setter Property="MinWidth" Value="96" />
            <Setter Property="CornerRadius" Value="8" />
            <Setter Property="HorizontalContentAlignment" Value="Center" />
            <Setter Property="VerticalContentAlignment" Value="Center" />
            <Setter Property="Padding" Value="14,0" />
        </Style>

        <Style Selector="Button.accent">
            <Setter Property="Background" Value="{DynamicResource SystemControlBackgroundAccentBrush}"/>
            <Setter Property="Foreground" Value="{DynamicResource SystemControlForegroundChromeWhiteBrush}"/>
        </Style>

        <Style Selector="Button.linkButton">
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="Foreground" Value="{DynamicResource SystemAccentColorBrush}" />
            <Setter Property="Padding" Value="0" />
            <Setter Property="Cursor" Value="Hand" />
            <Setter Property="Opacity" Value="0.9" />
        </Style>

        <Style Selector="Button.linkButton:pointerover">
            <Setter Property="Opacity" Value="1" />
        </Style>

        <Style Selector="Button.linkButton TextBlock">
            <Setter Property="TextDecorations" Value="Underline" />
        </Style>
    </Application.Styles>

    <NativeMenu.Menu>
        <NativeMenu>
            <NativeMenuItem Header="{DynamicResource MenuAbout}" Command="{Binding ShowAboutCommand}" />
            <NativeMenuItemSeparator />
            <NativeMenuItem Header="{DynamicResource MenuSettings}" Gesture="Cmd+,"
                            Command="{Binding ShowSettingsCommand}" />
            <NativeMenuItem Header="{DynamicResource MenuCheckUpdate}" Command="{Binding CheckForUpdatesCommand}" />
            <NativeMenuItem Header="{DynamicResource BtnNewTask}" Gesture="Cmd+N"
                            Command="{Binding ShowAddTaskCommand}" />
            <NativeMenuItemSeparator />
            <NativeMenuItem Header="{DynamicResource MenuQuit}" Gesture="Cmd+Q" Command="{Binding QuitAppCommand}" />
        </NativeMenu>
    </NativeMenu.Menu>

    <Application.Resources>
        <ResourceDictionary>
            <ResourceDictionary.ThemeDictionaries>
                <ResourceDictionary x:Key="Light">
                    <SolidColorBrush x:Key="WorkspaceBackgroundBrush" Color="#F2F3F5" />
                    <SolidColorBrush x:Key="CardBackgroundBrush" Color="#FFFFFF" />
                    <BoxShadows x:Key="CardShadow">0 2 2 0 #10000000</BoxShadows>
                    <BoxShadows x:Key="CardHoverShadow">0 2 2 0 #406842</BoxShadows>
                    <SolidColorBrush x:Key="SidebarActiveForegroundBrush" Color="{StaticResource SystemAccentColor}" />
                </ResourceDictionary>
                <ResourceDictionary x:Key="Dark">
                    <SolidColorBrush x:Key="WorkspaceBackgroundBrush" Color="#1E1E1E" />
                    <SolidColorBrush x:Key="CardBackgroundBrush" Color="#2D2D2D" />
                    <SolidColorBrush x:Key="SystemControlHighlightBaseLowBrush" Color="#000000" />
                    <BoxShadows x:Key="CardShadow">0 2 2 0 #40000000</BoxShadows>
                    <BoxShadows x:Key="CardHoverShadow">0 2 2 0 #406842</BoxShadows>
                    <SolidColorBrush x:Key="SidebarActiveForegroundBrush" Color="White" />
                </ResourceDictionary>
            </ResourceDictionary.ThemeDictionaries>

            <!-- Theme Colors Overrides (#508252) -->
            <Color x:Key="SystemAccentColor">#508252</Color>
            <Color x:Key="SystemAccentColorDark1">#406842</Color>
            <Color x:Key="SystemAccentColorDark2">#304E31</Color>
            <Color x:Key="SystemAccentColorDark3">#203421</Color>
            <Color x:Key="SystemAccentColorLight1">#6A9A6C</Color>
            <Color x:Key="SystemAccentColorLight2">#85B287</Color>
            <Color x:Key="SystemAccentColorLight3">#A0C9A2</Color>

            <SolidColorBrush x:Key="SystemControlHighlightAccentBrush" Color="{StaticResource SystemAccentColor}" />
            <SolidColorBrush x:Key="SystemControlForegroundAccentBrush" Color="{StaticResource SystemAccentColor}" />
            <SolidColorBrush x:Key="SystemControlBackgroundAccentBrush" Color="{StaticResource SystemAccentColor}" />
            <SolidColorBrush x:Key="SystemAccentColorBrush" Color="{StaticResource SystemAccentColor}" />

            <!-- Icons -->
            <StreamGeometry x:Key="IconAdd">M19,13h-6v6h-2v-6H5v-2h6V5h2v6h6V13z</StreamGeometry>
            <StreamGeometry x:Key="IconDownloading">M11,4h2v8.17l3.59-3.58L18,10l-6,6l-6-6l1.41-1.41L11,12.17V4z M4,20v-2h16v2H4z</StreamGeometry>
            <StreamGeometry x:Key="IconWaiting">M12,2C6.48,2,2,6.48,2,12s4.48,10,10,10s10-4.48,10-10S17.52,2,12,2z M12,6c0.55,0,1,0.45,1,1v5l4.25,2.52c0.48,0.28,0.63,0.89,0.35,1.37c-0.28,0.48-0.89,0.63-1.37,0.35L11,12.75V7C11,6.45,11.45,6,12,6z</StreamGeometry>
            <StreamGeometry x:Key="IconStopped">M12,2C6.48,2,2,6.48,2,12s4.48,10,10,10s10-4.48,10-10S17.52,2,12,2z M9,16c-0.55,0-1-0.45-1-1V9c0-0.55,0.45-1,1-1h6c0.55,0,1,0.45,1,1v6c0,0.55-0.45,1-1,1H9z</StreamGeometry>
            <StreamGeometry x:Key="IconSettings">M19.4,13c0-0.3,0.1-0.6,0.1-1s0-0.4-0.1-1l2.1-1.7c0.2-0.2,0.2-0.4,0.1-0.6l-2-3.5c-0.1-0.2-0.3-0.3-0.5-0.2l-2.5,1c-0.5-0.4-1.1-0.7-1.7-1l-0.4-2.6C14.5,2.2,14.3,2,14,2h-4c-0.3,0-0.5,0.2-0.5,0.5l-0.4,2.6c-0.6,0.3-1.2,0.6-1.7,1l-2.5-1c-0.2-0.1-0.4,0-0.5,0.2l-2,3.5c-0.1,0.2-0.1,0.4,0.1,0.6l2.1,1.7c-0.1,0.3-0.1,0.6-0.1,1s0,0.4,0.1,1l-2.1,1.7c-0.2,0.2-0.2,0.4-0.1,0.6l2,3.5c0.1,0.2,0.3,0.3,0.5,0.2l2.5-1c0.5,0.4,1.1,0.7,1.7,1l0.4,2.6c0,0.3,0.2,0.5,0.5,0.5h4c0.3,0,0.5-0.2,0.5-0.5l0.4-2.6c0.6-0.3,1.2-0.6,1.7-1l2.5,1c0.2,0.1,0.4,0,0.5-0.2l2-3.5c0.1-0.2,0.1-0.4-0.1-0.6L19.4,13z M12,15.5c-1.9,0-3.5-1.6-3.5-3.5s1.6-3.5,3.5-3.5s3.5,1.6,3.5,3.5S13.9,15.5,12,15.5z</StreamGeometry>
            <StreamGeometry x:Key="IconMenu">M3,18h18v-2H3V18z M3,13h18v-2H3V13z M3,6v2h18V6H3z</StreamGeometry>
            <StreamGeometry x:Key="IconSidebar">M19,3H5C3.9,3,3,3.9,3,5v14c0,1.1,0.9,2,2,2h14c1.1,0,2-0.9,2-2V5C21,3.9,20.1,3,19,3z M9,19H5V5h4V19z M19,19h-8V5h8V19z</StreamGeometry>
            <StreamGeometry x:Key="IconPlay">M8,5v14l11-7L8,5z</StreamGeometry>
            <StreamGeometry x:Key="IconPause">M6,19h4V5H6V19z M14,5v14h4V5H14z</StreamGeometry>
            <StreamGeometry x:Key="IconFolder">M10,4H4c-1.1,0-1.99,0.9-1.99,2L2,18c0,1.1,0.9,2,2,2h16c1.1,0,2-0.9,2-2V8c0-1.1-0.9-2-2-2h-8l-2-2z</StreamGeometry>
            <StreamGeometry x:Key="IconInfo">M11,7h2v2h-2V7z M11,11h2v6h-2V11z M12,2C6.48,2,2,6.48,2,12s4.48,10,10,10s10-4.48,10-10S17.52,2,12,2z</StreamGeometry>
            <StreamGeometry x:Key="IconTrash">M6,19c0,1.1,0.9,2,2,2h8c1.1,0,2-0.9,2-2V7H6V19z M19,4h-3.5l-1-1h-5l-1,1H5v2h14V4z</StreamGeometry>
            <StreamGeometry x:Key="IconRefresh">M17.65,6.35C16.2,4.9,14.21,4,12,4c-4.42,0-7.99,3.58-7.99,8s3.57,8,7.99,8c3.73,0,6.84-2.55,7.73-6h-2.08c-0.82,2.33-3.04,4-5.65,4c-3.31,0-6-2.69-6-6s2.69-6,6-6c1.66,0,3.14,0.69,4.22,1.78L13,11h7V4L17.65,6.35z</StreamGeometry>
            <StreamGeometry x:Key="IconLink">M3.9,12c0-1.71,1.39-3.1,3.1-3.1h4V7H7c-2.76,0-5,2.24-5,5s2.24,5,5,5h4v-1.9H7C5.29,15.1,3.9,13.71,3.9,12z M8,13h8v-2H8V13z M17,7h-4v1.9h4c1.71,0,3.1,1.39,3.1,3.1s-1.39,3.1-3.1,3.1h-4V17h4c2.76,0,5-2.24,5-5S19.76,7,17,7z</StreamGeometry>
            <StreamGeometry x:Key="IconGitHub">M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z</StreamGeometry>
            <StreamGeometry x:Key="IconCancel">M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41z</StreamGeometry>
        </ResourceDictionary>
    </Application.Resources>

    <Application.Styles>
        <Style Selector="Border.card">
            <Setter Property="Background" Value="{DynamicResource ContentBackgroundBrush}" />
        </Style>
    </Application.Styles>
</Application>
